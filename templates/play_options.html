{% extends "base.html" %}

{% block title %}Choose Game Mode - Super Tic-Tac-Toe{% endblock %}

{% block content %}
<!-- Matrix Rain Background -->
<div class="binary-bg" id="binary-background" style="z-index: -999; pointer-events: none; position: fixed;"></div>

<div class="dev-container" style="position: relative; z-index: 1;">
    <!-- Header -->
    <div class="text-center mb-xl">
        <h1 id="play-title" class="mono" style="color: var(--dev-white); font-size: 2.5rem; margin-bottom: 2rem; opacity: 0;"
           data-typewriter="> Choose_Your_Challenge" data-typewriter-speed="40" data-typewriter-delay="300">
        </h1>
    </div>

    <!-- Main Game Mode Selector -->
    <div style="max-width: 800px; margin: 0 auto;">
        
        <!-- Primary Game Mode Cards -->
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 3rem;">
            
            <!-- AI Challenge Card -->
            <div class="dev-card" style="position: relative; padding: 0; overflow: hidden; background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(29, 78, 216, 0.05) 100%), var(--dev-black); border: 1px solid rgba(59, 130, 246, 0.2); z-index: 2; backdrop-filter: blur(0px);">
                <div style="padding: 2.5rem 2rem;">
                    <div style="color: var(--dev-blue); font-size: 3rem; margin-bottom: 1rem; text-align: center;">
                        <i class="fas fa-robot"></i>
                    </div>
                    
                    <h2 class="mono" style="color: var(--dev-white); font-size: 1.6rem; margin-bottom: 1rem; text-align: center; font-weight: 400;">
                        AI Challenge
                    </h2>
                    
                    <p class="mono" style="color: var(--dev-text-gray); margin-bottom: 2rem; text-align: center; font-size: 0.95rem; line-height: 1.5;">
                        Test your skills against intelligent opponents
                    </p>
                    
                    <!-- AI Difficulty Grid -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.75rem; margin-bottom: 2rem;">
                        <a href="{{ url_for('game.simple_game', difficulty='easy') }}" 
                           class="mono difficulty-btn" 
                           style="display: flex; flex-direction: column; align-items: center; padding: 1rem 0.5rem; background: rgba(34, 197, 94, 0.1); color: var(--dev-white); text-decoration: none; border-radius: 8px; font-size: 0.85rem; transition: all 0.3s ease; border: 1px solid rgba(34, 197, 94, 0.3);"
                           onmouseover="this.style.background='rgba(34, 197, 94, 0.2)'; this.style.transform='translateY(-2px)'"
                           onmouseout="this.style.background='rgba(34, 197, 94, 0.1)'; this.style.transform='translateY(0px)'">
                            <i class="fas fa-leaf" style="color: #22c55e; font-size: 1.2rem; margin-bottom: 0.5rem;"></i>
                            Easy
                        </a>
                        
                        <a href="{{ url_for('game.simple_game', difficulty='medium') }}" 
                           class="mono difficulty-btn" 
                           style="display: flex; flex-direction: column; align-items: center; padding: 1rem 0.5rem; background: rgba(251, 191, 36, 0.1); color: var(--dev-white); text-decoration: none; border-radius: 8px; font-size: 0.85rem; transition: all 0.3s ease; border: 1px solid rgba(251, 191, 36, 0.3);"
                           onmouseover="this.style.background='rgba(251, 191, 36, 0.2)'; this.style.transform='translateY(-2px)'"
                           onmouseout="this.style.background='rgba(251, 191, 36, 0.1)'; this.style.transform='translateY(0px)'">
                            <i class="fas fa-brain" style="color: #fbbf24; font-size: 1.2rem; margin-bottom: 0.5rem;"></i>
                            Medium
                        </a>
                        
                        <a href="{{ url_for('game.simple_game', difficulty='hard') }}" 
                           class="mono difficulty-btn" 
                           style="display: flex; flex-direction: column; align-items: center; padding: 1rem 0.5rem; background: rgba(239, 68, 68, 0.1); color: var(--dev-white); text-decoration: none; border-radius: 8px; font-size: 0.85rem; transition: all 0.3s ease; border: 1px solid rgba(239, 68, 68, 0.3);"
                           onmouseover="this.style.background='rgba(239, 68, 68, 0.2)'; this.style.transform='translateY(-2px)'"
                           onmouseout="this.style.background='rgba(239, 68, 68, 0.1)'; this.style.transform='translateY(0px)'">
                            <i class="fas fa-fire" style="color: #ef4444; font-size: 1.2rem; margin-bottom: 0.5rem;"></i>
                            Hard
                        </a>
                    </div>
                    
                    <!-- Quick Stats -->
                    <div style="background: rgba(0, 0, 0, 0.3); border-radius: 6px; padding: 1rem; text-align: center;">
                        <div class="mono" style="color: var(--dev-text-gray); font-size: 0.8rem; margin-bottom: 0.25rem;">
                            AI Victories
                        </div>
                        <div class="mono" style="color: var(--dev-blue); font-size: 1.2rem; font-weight: 600;">
                            {% if current_user.is_authenticated %}
                                {{ (current_user.easy_ai_wins or 0) + (current_user.medium_ai_wins or 0) + (current_user.hard_ai_wins or 0) }}
                            {% else %}
                                0
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Multiplayer Hub -->
            <div class="dev-card" style="position: relative; padding: 0; overflow: hidden; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.05) 100%), var(--dev-black); border: 1px solid rgba(16, 185, 129, 0.2); z-index: 2; backdrop-filter: blur(0px);">
                <div style="padding: 2.5rem 2rem;">
                    <div style="color: var(--dev-green); font-size: 3rem; margin-bottom: 1rem; text-align: center;">
                        <i class="fas fa-users"></i>
                    </div>
                    
                    <h2 class="mono" style="color: var(--dev-white); font-size: 1.6rem; margin-bottom: 1rem; text-align: center; font-weight: 400;">
                        Multiplayer
                    </h2>
                    
                    <p class="mono" style="color: var(--dev-text-gray); margin-bottom: 2rem; text-align: center; font-size: 0.95rem; line-height: 1.5;">
                        Challenge friends locally or online
                    </p>
                    
                    <!-- Multiplayer Options -->
                    <div style="display: flex; flex-direction: column; gap: 1rem; margin-bottom: 2rem;">
                        <a href="/game/pvp/local" 
                           class="mono" 
                           style="display: flex; align-items: center; justify-content: center; padding: 1.2rem 1rem; background: rgba(16, 185, 129, 0.1); color: var(--dev-white); text-decoration: none; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease; border: 1px solid rgba(16, 185, 129, 0.3);"
                           onmouseover="this.style.background='rgba(16, 185, 129, 0.2)'; this.style.transform='translateY(-2px)'"
                           onmouseout="this.style.background='rgba(16, 185, 129, 0.1)'; this.style.transform='translateY(0px)'">
                            <i class="fas fa-home" style="margin-right: 0.75rem; color: #10b981;"></i>
                            Local Game
                        </a>
                        
                        <a href="/game/pvp/online" 
                           class="mono" 
                           style="display: flex; align-items: center; justify-content: center; padding: 1.2rem 1rem; background: rgba(239, 68, 68, 0.1); color: var(--dev-white); text-decoration: none; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease; border: 1px solid rgba(239, 68, 68, 0.3);"
                           onmouseover="this.style.background='rgba(239, 68, 68, 0.2)'; this.style.transform='translateY(-2px)'"
                           onmouseout="this.style.background='rgba(239, 68, 68, 0.1)'; this.style.transform='translateY(0px)'">
                            <i class="fas fa-wifi" style="margin-right: 0.75rem; color: #ef4444;"></i>
                            Online Match
                        </a>
                    </div>
                    
                    <!-- Online Status -->
                    <div style="background: rgba(0, 0, 0, 0.3); border-radius: 6px; padding: 1rem; text-align: center;">
                        <div class="mono" style="color: var(--dev-green); font-size: 0.9rem;">
                            <i class="fas fa-circle" style="font-size: 0.6rem; margin-right: 0.5rem;"></i>
                            Online Ready
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Quick Stats Dashboard -->
        <div class="dev-card" style="background: linear-gradient(90deg, rgba(59, 130, 246, 0.05) 0%, rgba(16, 185, 129, 0.05) 50%, rgba(239, 68, 68, 0.05) 100%), var(--dev-black); border: 1px solid rgba(255, 255, 255, 0.1); padding: 2rem; position: relative; z-index: 2; backdrop-filter: blur(0px);">
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 2rem; text-align: center;">
                <div>
                    <div class="mono" style="color: var(--dev-blue); font-size: 1.8rem; font-weight: 600; margin-bottom: 0.25rem;">
                        {% if current_user.is_authenticated %}{{ current_user.games_played }}{% else %}0{% endif %}
                    </div>
                    <div class="mono" style="color: var(--dev-text-gray); font-size: 0.8rem;">Games Played</div>
                </div>
                <div>
                    <div class="mono" style="color: var(--dev-green); font-size: 1.8rem; font-weight: 600; margin-bottom: 0.25rem;">
                        {% if current_user.is_authenticated %}{{ current_user.games_won }}{% else %}0{% endif %}
                    </div>
                    <div class="mono" style="color: var(--dev-text-gray); font-size: 0.8rem;">Victories</div>
                </div>
                <div>
                    <div class="mono" style="color: var(--dev-yellow); font-size: 1.8rem; font-weight: 600; margin-bottom: 0.25rem;">
                        {% if current_user.is_authenticated %}{{ "%.0f"|format(current_user.win_rate) }}%{% else %}0%{% endif %}
                    </div>
                    <div class="mono" style="color: var(--dev-text-gray); font-size: 0.8rem;">Win Rate</div>
                </div>
                <div>
                    <div class="mono" style="color: var(--dev-blue-light); font-size: 1.8rem; font-weight: 600; margin-bottom: 0.25rem;">
                        {% if current_user.is_authenticated %}{{ current_user.games_drawn }}{% else %}0{% endif %}
                    </div>
                    <div class="mono" style="color: var(--dev-text-gray); font-size: 0.8rem;">Draws</div>
                </div>
            </div>
        </div>
        
    </div>
</div>

<style>
.difficulty-btn:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.dev-card {
    transition: transform 0.2s ease;
}

.dev-card:hover {
    transform: translateY(-3px);
}

/* Override matrix rain colors to green */
.binary-char {
    color: rgba(34, 197, 94, 0.4) !important;
    text-shadow: 0 0 5px rgba(34, 197, 94, 0.3) !important;
}

@keyframes binaryFall {
    0% {
        transform: translateY(0);
        opacity: 0;
        color: rgba(34, 197, 94, 0.6) !important;
        text-shadow: 0 0 8px rgba(34, 197, 94, 0.4) !important;
    }
    5% {
        opacity: 1;
        color: rgba(34, 197, 94, 0.5) !important;
        text-shadow: 0 0 6px rgba(34, 197, 94, 0.3) !important;
    }
    50% {
        opacity: 0.8;
        color: rgba(34, 197, 94, 0.4) !important;
        text-shadow: 0 0 4px rgba(34, 197, 94, 0.2) !important;
    }
    85% {
        opacity: 0.6;
        color: rgba(34, 197, 94, 0.3) !important;
        text-shadow: 0 0 2px rgba(34, 197, 94, 0.1) !important;
    }
    100% {
        transform: translateY(100vh);
        opacity: 0;
        color: rgba(34, 197, 94, 0.1) !important;
        text-shadow: none !important;
    }
}
</style>

<script>
// Initialize matrix rain on page load using centralized system
document.addEventListener('DOMContentLoaded', function() {
    startMatrixRain();
});
</script>

{% endblock %}